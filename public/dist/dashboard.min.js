angular.module("appDashboard",["ngResource","ui.router","ui.bootstrap"]),angular.module("appDashboard").run(["$rootScope","$timeout","$interval",function(o){o.servant={}}]),angular.module("appDashboard").config(["$stateProvider","$urlRouterProvider",function(o,e){e.otherwise("/"),o.state("dashboard",{url:"/",templateUrl:"views/dashboard/dashboard.html"})}]),angular.module("appDashboard").config(["$locationProvider",function(o){o.hashPrefix("!")}]);var environment=$("#dashboard-container").attr("data-dashboard");"development"===environment&&console.log("Environment: Development"),angular.module("appDashboard").controller("DashboardController",["$rootScope","$scope","$timeout","$modal","LeadCapture",function(o,e,a,i,n){e.domains=[],e.new_domain="",e.domain,e.form,e.field_types=["email","full_name","select"],e.field="email",e.fields={},e.fields.email={type:"email"},e.fields.full_name={type:"full_name"},e.fields.select={type:"select",title:"Untitled Select Field",options:[]};var l={title:"Untitled Form",cta1:"Get Updates",cta2:"Sign up to receive updates about our service",blocks:[e.fields.full_name,e.fields.email]};e.initialize=function(){e.listDomains()},e.listDomains=function(){n.listDomains(function(o){e.domains=o,console.log("Domains Fetched: ",e.domains),e.domain=e.domains[0],e.form=e.domain.forms[0],void 0===e.form&&(e.form=l)},function(o){console.log(o)})},e.createDomain=function(){n.createDomain({},{domain:e.new_domain},function(){e.new_domain="",e.listDomains()},function(o){console.log(o)})},e.addField=function(){e.form.blocks.push(e.fields[e.field]),e.field="email",console.log("Field Added: ",e.form)},e.moveSortable=function(o,a,i){"up"===i&&a>0&&(e.form.blocks.splice(a,1),e.form.blocks.splice(a-1,0,o)),"down"===i&&a<e.form.blocks.length&&(e.form.blocks.splice(a,1),e.form.blocks.splice(a+1,0,o))},e.removeSortable=function(o){e.form.blocks.splice(o,1)}}]),angular.module("appDashboard").factory("LeadCapture",["$resource",function(o){return o("",null,{listDomains:{method:"GET",isArray:!0,url:"/domains"},createDomain:{method:"POST",isArray:!1,url:"/domains"},saveDomain:{method:"PUT",isArray:!1,url:"/domains/:domain"}})}]);